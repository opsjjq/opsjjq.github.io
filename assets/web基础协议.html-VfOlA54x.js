import{_ as e,c as l,e as a,o as s}from"./app-DtXLoKBz.js";const n={};function i(d,t){return s(),l("div",null,[...t[0]||(t[0]=[a(`<h1 id="web-通信与-http-协议学习笔记" tabindex="-1"><a class="header-anchor" href="#web-通信与-http-协议学习笔记"><span>Web 通信与 HTTP 协议学习笔记</span></a></h1><h2 id="一、web-通信流程概述" tabindex="-1"><a class="header-anchor" href="#一、web-通信流程概述"><span>一、Web 通信流程概述</span></a></h2><h3 id="_1-整体通信流程" tabindex="-1"><a class="header-anchor" href="#_1-整体通信流程"><span>1. 整体通信流程</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → DNS 解析 → 建立 TCP 连接 → 发送 HTTP 请求 → 服务器处理 → 返回 HTTP 响应 → 客户端渲染 → 断开连接</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-服务器工作原理" tabindex="-1"><a class="header-anchor" href="#_2-服务器工作原理"><span>2. 服务器工作原理</span></a></h3><ul><li>接收客户端的 TCP 连接</li><li>解析 HTTP 请求报文</li><li>处理请求（静态资源直接返回，动态内容调用解释引擎）</li><li>生成 HTTP 响应报文</li><li>发送响应并关闭连接</li></ul><h3 id="_3-客户端工作原理" tabindex="-1"><a class="header-anchor" href="#_3-客户端工作原理"><span>3. 客户端工作原理</span></a></h3><ul><li>DNS 解析获取服务器 IP</li><li>建立 TCP 连接</li><li>构建并发送 HTTP 请求</li><li>接收并解析 HTTP 响应</li><li>渲染页面内容</li><li>管理连接状态</li></ul><hr><h2 id="二、tcp-ip-与osi网络模型" tabindex="-1"><a class="header-anchor" href="#二、tcp-ip-与osi网络模型"><span>二、TCP/IP 与OSI网络模型</span></a></h2><h3 id="_1-tcp-ip-协议栈" tabindex="-1"><a class="header-anchor" href="#_1-tcp-ip-协议栈"><span>1. TCP/IP 协议栈</span></a></h3><p>TCP/IP 四层模型（实际使用模型）：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">应用层 → 传输层 → 网络层 → 网络接口层</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-osi-七层模型" tabindex="-1"><a class="header-anchor" href="#_2-osi-七层模型"><span>2. OSI 七层模型</span></a></h3><table><thead><tr><th style="text-align:left;">层级</th><th style="text-align:left;">名称</th><th style="text-align:left;">主要功能</th><th style="text-align:left;">典型协议</th></tr></thead><tbody><tr><td style="text-align:left;">7</td><td style="text-align:left;">应用层</td><td style="text-align:left;">用户接口、应用程序</td><td style="text-align:left;">HTTP, FTP, SSH</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;">表示层</td><td style="text-align:left;">数据格式转换、加密</td><td style="text-align:left;">JPEG, SSL</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">会话层</td><td style="text-align:left;">建立、管理会话</td><td style="text-align:left;">RPC, NetBIOS</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;">传输层</td><td style="text-align:left;">端到端连接、可靠性</td><td style="text-align:left;">TCP, UDP</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">网络层</td><td style="text-align:left;">寻址、路由选择</td><td style="text-align:left;">IP, ICMP</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">数据链路层</td><td style="text-align:left;">帧传输、MAC地址</td><td style="text-align:left;">Ethernet, PPP</td></tr><tr><td style="text-align:left;">1</td><td style="text-align:left;">物理层</td><td style="text-align:left;">比特流传输</td><td style="text-align:left;">RJ45, 光纤</td></tr></tbody></table><hr><h2 id="三、tcp-连接管理" tabindex="-1"><a class="header-anchor" href="#三、tcp-连接管理"><span>三、TCP 连接管理</span></a></h2><h3 id="_1-三次握手-建立连接" tabindex="-1"><a class="header-anchor" href="#_1-三次握手-建立连接"><span>1. 三次握手（建立连接）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → SYN →     服务器     # 客户端发送连接请求</span>
<span class="line">客户端 ← SYN+ACK ← 服务器     # 服务器确认并回应</span>
<span class="line">客户端 → ACK →     服务器     # 客户端确认，连接建立</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>意义验证</strong>：</p><ul><li>第一次：验证客户端发送能力</li><li>第二次：验证服务器收发能力</li><li>第三次：验证客户端接收能力</li></ul><h3 id="_2-四次挥手-断开连接" tabindex="-1"><a class="header-anchor" href="#_2-四次挥手-断开连接"><span>2. 四次挥手（断开连接）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → FIN → 服务器     # 客户端发起关闭</span>
<span class="line">客户端 ← ACK ← 服务器     # 服务器确认收到</span>
<span class="line">客户端 ← FIN ← 服务器     # 服务器发起关闭</span>
<span class="line">客户端 → ACK → 服务器     # 客户端确认，连接关闭</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-三次挥手优化" tabindex="-1"><a class="header-anchor" href="#_3-三次挥手优化"><span>3. 三次挥手优化</span></a></h3><p><strong>条件</strong>：服务器无数据发送时，合并第2、3次挥手</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → FIN →     服务器</span>
<span class="line">客户端 ← FIN+ACK ← 服务器  # 合并响应</span>
<span class="line">客户端 → ACK →     服务器</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>优化所用机制</strong>：</p><ul><li>延迟确认（Delayed ACK）：等待40ms看是否有数据要发送</li><li>捎带应答（Piggybacking）：将 ACK 与数据合并发送</li></ul><hr><h2 id="四、socket-套接字" tabindex="-1"><a class="header-anchor" href="#四、socket-套接字"><span>四、Socket 套接字</span></a></h2><h3 id="_1-基本概念" tabindex="-1"><a class="header-anchor" href="#_1-基本概念"><span>1. 基本概念</span></a></h3><ul><li>Socket = IP地址 + 端口号</li><li>网络通信的本质是 Socket 之间的数据交换</li></ul><h3 id="_2-socket-类型" tabindex="-1"><a class="header-anchor" href="#_2-socket-类型"><span>2. Socket 类型</span></a></h3><table><thead><tr><th style="text-align:left;">类型</th><th style="text-align:left;">格式</th><th style="text-align:left;">特点</th><th style="text-align:left;">应用场景</th></tr></thead><tbody><tr><td style="text-align:left;">网络Socket</td><td style="text-align:left;">IP:Port</td><td style="text-align:left;">跨机器通信</td><td style="text-align:left;">HTTP服务、数据库远程连接</td></tr><tr><td style="text-align:left;">本地Socket文件</td><td style="text-align:left;">文件路径</td><td style="text-align:left;">本机进程间通信</td><td style="text-align:left;">数据库本地连接、进程通信</td></tr></tbody></table><h3 id="_3-常见端口号" tabindex="-1"><a class="header-anchor" href="#_3-常见端口号"><span>3. 常见端口号</span></a></h3><table><thead><tr><th style="text-align:left;">服务</th><th style="text-align:left;">端口</th><th style="text-align:left;">协议</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">HTTP</td><td style="text-align:left;">80</td><td style="text-align:left;">TCP</td><td style="text-align:left;">网页服务</td></tr><tr><td style="text-align:left;">HTTPS</td><td style="text-align:left;">443</td><td style="text-align:left;">TCP</td><td style="text-align:left;">加密网页服务</td></tr><tr><td style="text-align:left;">SSH</td><td style="text-align:left;">22</td><td style="text-align:left;">TCP</td><td style="text-align:left;">安全远程连接</td></tr><tr><td style="text-align:left;">FTP</td><td style="text-align:left;">21</td><td style="text-align:left;">TCP</td><td style="text-align:left;">文件传输</td></tr><tr><td style="text-align:left;">MySQL</td><td style="text-align:left;">3306</td><td style="text-align:left;">TCP</td><td style="text-align:left;">数据库服务</td></tr><tr><td style="text-align:left;">DNS</td><td style="text-align:left;">53</td><td style="text-align:left;">UDP/TCP</td><td style="text-align:left;">域名解析</td></tr></tbody></table><hr><h2 id="五、http-协议详解" tabindex="-1"><a class="header-anchor" href="#五、http-协议详解"><span>五、HTTP 协议详解</span></a></h2><h3 id="_1-无状态特性" tabindex="-1"><a class="header-anchor" href="#_1-无状态特性"><span>1. 无状态特性</span></a></h3><ul><li>HTTP 协议默认不记录连接状态</li><li>每次请求被视为独立事务</li><li>解决方案：Cookie、Session、Token</li></ul><h3 id="_2-http-请求方法" tabindex="-1"><a class="header-anchor" href="#_2-http-请求方法"><span>2. HTTP 请求方法</span></a></h3><table><thead><tr><th style="text-align:left;">方法</th><th style="text-align:left;">功能</th><th style="text-align:left;">幂等性</th><th style="text-align:left;">安全性</th></tr></thead><tbody><tr><td style="text-align:left;">GET</td><td style="text-align:left;">获取资源</td><td style="text-align:left;">是</td><td style="text-align:left;">安全</td></tr><tr><td style="text-align:left;">POST</td><td style="text-align:left;">提交数据</td><td style="text-align:left;">否</td><td style="text-align:left;">不安全</td></tr><tr><td style="text-align:left;">PUT</td><td style="text-align:left;">更新完整资源</td><td style="text-align:left;">是</td><td style="text-align:left;">不安全</td></tr><tr><td style="text-align:left;">DELETE</td><td style="text-align:left;">删除资源</td><td style="text-align:left;">是</td><td style="text-align:left;">不安全</td></tr><tr><td style="text-align:left;">PATCH</td><td style="text-align:left;">部分更新</td><td style="text-align:left;">否</td><td style="text-align:left;">不安全</td></tr><tr><td style="text-align:left;">HEAD</td><td style="text-align:left;">获取响应头</td><td style="text-align:left;">是</td><td style="text-align:left;">安全</td></tr><tr><td style="text-align:left;">OPTIONS</td><td style="text-align:left;">查询支持方法</td><td style="text-align:left;">是</td><td style="text-align:left;">安全</td></tr></tbody></table><h3 id="_3-http-报文结构" tabindex="-1"><a class="header-anchor" href="#_3-http-报文结构"><span>3. HTTP 报文结构</span></a></h3><p><strong>请求报文</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">请求行（方法 + 路径 + 版本）</span>
<span class="line">请求头（Host、User-Agent等）</span>
<span class="line">空行</span>
<span class="line">请求体（POST数据）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>响应报文</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">状态行（版本 + 状态码 + 描述）</span>
<span class="line">响应头（Server、Content-Type等）</span>
<span class="line">空行</span>
<span class="line">响应体（HTML、JSON等）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-http-状态码" tabindex="-1"><a class="header-anchor" href="#_4-http-状态码"><span>4. HTTP 状态码</span></a></h3><table><thead><tr><th style="text-align:left;">类别</th><th style="text-align:left;">范围</th><th style="text-align:left;">含义</th><th style="text-align:left;">常见状态码</th></tr></thead><tbody><tr><td style="text-align:left;">1xx</td><td style="text-align:left;">100-199</td><td style="text-align:left;">信息性</td><td style="text-align:left;">100 Continue</td></tr><tr><td style="text-align:left;">2xx</td><td style="text-align:left;">200-299</td><td style="text-align:left;">成功</td><td style="text-align:left;">200 OK, 201 Created</td></tr><tr><td style="text-align:left;">3xx</td><td style="text-align:left;">300-399</td><td style="text-align:left;">重定向</td><td style="text-align:left;">301 Moved, 304 Not Modified</td></tr><tr><td style="text-align:left;">4xx</td><td style="text-align:left;">400-499</td><td style="text-align:left;">客户端错误</td><td style="text-align:left;">400 Bad Request, 404 Not Found</td></tr><tr><td style="text-align:left;">5xx</td><td style="text-align:left;">500-599</td><td style="text-align:left;">服务器错误</td><td style="text-align:left;">500 Internal Error, 502 Bad Gateway</td></tr></tbody></table><hr><h2 id="六、静态与动态资源" tabindex="-1"><a class="header-anchor" href="#六、静态与动态资源"><span>六、静态与动态资源</span></a></h2><h3 id="_1-静态资源" tabindex="-1"><a class="header-anchor" href="#_1-静态资源"><span>1. 静态资源</span></a></h3><ul><li><strong>特征</strong>：文件扩展名明确（.html, .css, .js, .jpg等）</li><li><strong>处理</strong>：Web 服务器直接读取返回</li><li><strong>缓存</strong>：CDN 缓存友好</li><li><strong>示例</strong>：<code>/static/image.jpg</code>, <code>/css/style.css</code></li></ul><h3 id="_2-动态资源" tabindex="-1"><a class="header-anchor" href="#_2-动态资源"><span>2. 动态资源</span></a></h3><ul><li><strong>特征</strong>：需要程序处理生成</li><li><strong>处理</strong>：转发给后端程序（PHP、Python、Java）</li><li><strong>缓存</strong>：通常不缓存或短时缓存</li><li><strong>示例</strong>：<code>/api/user</code>, <code>/search?q=keyword</code></li></ul><hr><h2 id="七、完整通信流程-面试背诵版" tabindex="-1"><a class="header-anchor" href="#七、完整通信流程-面试背诵版"><span>七、完整通信流程（面试背诵版）</span></a></h2><h3 id="_1-dns-解析阶段" tabindex="-1"><a class="header-anchor" href="#_1-dns-解析阶段"><span>1. DNS 解析阶段</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">用户访问 www.example.com</span>
<span class="line">↓</span>
<span class="line">浏览器缓存检查</span>
<span class="line">↓</span>
<span class="line">Hosts 文件检查</span>
<span class="line">↓</span>
<span class="line">本地 DNS 服务器（递归查询）</span>
<span class="line">↓</span>
<span class="line">根域名服务器 → 顶级域名服务器 → 权威域名服务器（迭代查询）</span>
<span class="line">↓</span>
<span class="line">返回 IP 地址</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-tcp-连接阶段-三次握手" tabindex="-1"><a class="header-anchor" href="#_2-tcp-连接阶段-三次握手"><span>2. TCP 连接阶段（三次握手）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → SYN → 服务器</span>
<span class="line">客户端 ← SYN+ACK ← 服务器</span>
<span class="line">客户端 → ACK → 服务器</span>
<span class="line">连接建立成功</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-http-请求阶段" tabindex="-1"><a class="header-anchor" href="#_3-http-请求阶段"><span>3. HTTP 请求阶段</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">GET /index.html HTTP/1.1</span>
<span class="line">Host: www.example.com</span>
<span class="line">User-Agent: Chrome/...</span>
<span class="line">Accept: text/html</span>
<span class="line">Cookie: session=abc123</span>
<span class="line">（空行）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-服务器处理阶段" tabindex="-1"><a class="header-anchor" href="#_4-服务器处理阶段"><span>4. 服务器处理阶段</span></a></h3><ul><li>Nginx 接收请求</li><li>静态资源：直接读取文件</li><li>动态资源：转发给后端程序（PHP-FPM、Python、Java）</li><li>生成响应内容</li></ul><h3 id="_5-http-响应阶段" tabindex="-1"><a class="header-anchor" href="#_5-http-响应阶段"><span>5. HTTP 响应阶段</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">HTTP/1.1 200 OK</span>
<span class="line">Server: nginx/1.18</span>
<span class="line">Content-Type: text/html</span>
<span class="line">Content-Length: 1234</span>
<span class="line">（空行）</span>
<span class="line">&lt;!DOCTYPE html&gt;...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-连接关闭阶段-四次挥手" tabindex="-1"><a class="header-anchor" href="#_6-连接关闭阶段-四次挥手"><span>6. 连接关闭阶段（四次挥手）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → FIN → 服务器</span>
<span class="line">客户端 ← ACK ← 服务器</span>
<span class="line">客户端 ← FIN ← 服务器</span>
<span class="line">客户端 → ACK → 服务器</span>
<span class="line">连接完全关闭</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="八、实践与排错要点" tabindex="-1"><a class="header-anchor" href="#八、实践与排错要点"><span>八、实践与排错要点</span></a></h2><h3 id="_1-抓包分析工具" tabindex="-1"><a class="header-anchor" href="#_1-抓包分析工具"><span>1. 抓包分析工具</span></a></h3><ul><li><strong>Wireshark</strong>：全面网络协议分析</li><li><strong>tcpdump</strong>：命令行抓包工具</li><li><strong>浏览器开发者工具</strong>：HTTP 请求/响应分析</li></ul><h3 id="_2-常见问题排查" tabindex="-1"><a class="header-anchor" href="#_2-常见问题排查"><span>2. 常见问题排查</span></a></h3><ol><li><strong>连接失败</strong>：检查防火墙、端口监听、服务状态</li><li><strong>响应缓慢</strong>：分析网络延迟、服务器负载、DNS解析</li><li><strong>状态码异常</strong>： <ul><li>4xx：检查客户端请求（URL、参数、权限）</li><li>5xx：检查服务器配置、后端服务、资源限制</li></ul></li></ol><h3 id="_3-性能优化方向" tabindex="-1"><a class="header-anchor" href="#_3-性能优化方向"><span>3. 性能优化方向</span></a></h3><ul><li>使用 CDN 缓存静态资源</li><li>启用 HTTP/2 或 HTTP/3</li><li>配置合理的缓存策略</li><li>优化图片和资源大小</li><li>使用异步加载技术</li></ul>`,77)])])}const c=e(n,[["render",i]]),h=JSON.parse('{"path":"/04-Web%E6%9E%B6%E6%9E%84/06-web%E5%9F%BA%E7%A1%80%E5%8D%8F%E8%AE%AE/web%E5%9F%BA%E7%A1%80%E5%8D%8F%E8%AE%AE.html","title":"Web 通信与 HTTP 协议学习笔记","lang":"zh-CN","frontmatter":{},"git":{"contributors":[{"name":"opsjjq","username":"opsjjq","email":"wangyp987@gmail.com","commits":1,"url":"https://github.com/opsjjq"}],"changelog":[{"hash":"ca8e661b7c6729c958583ed3d1a001b6de398273","time":1771558748000,"email":"wangyp987@gmail.com","author":"opsjjq","message":"222"}]},"filePathRelative":"04-Web架构/06-web基础协议/web基础协议.md"}');export{c as comp,h as data};
