import{_ as n,c as a,e,o as l}from"./app-DtXLoKBz.js";const i={};function t(p,s){return l(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="高并发缓存中间件-redis" tabindex="-1"><a class="header-anchor" href="#高并发缓存中间件-redis"><span>高并发缓存中间件 Redis</span></a></h1><h2 id="一、为什么学习-redis" tabindex="-1"><a class="header-anchor" href="#一、为什么学习-redis"><span>一、为什么学习 Redis？</span></a></h2><p>Redis 作为 C 语言开发的高性能键值存储系统，支持多种数据结构，广泛应用于缓存、消息队列、会话存储等场景。掌握其原理与高级操作是应对高并发、低延迟需求的必备技能。</p><hr><h3 id="redis-在电商架构中的应用" tabindex="-1"><a class="header-anchor" href="#redis-在电商架构中的应用"><span>Redis 在电商架构中的应用</span></a></h3><p>Redis 在电商系统中常用于：</p><ul><li>缓存商品信息、用户会话</li><li>消息队列（如订单处理、库存更新）</li><li>实时排行榜、秒杀系统</li></ul><hr><h3 id="redis-学习体系-阿里云视角" tabindex="-1"><a class="header-anchor" href="#redis-学习体系-阿里云视角"><span>Redis 学习体系（阿里云视角）</span></a></h3><p>涵盖：</p><ul><li>基础部署与配置</li><li>数据类型与操作</li><li>持久化机制</li><li>主从复制与哨兵</li><li>集群与高可用</li><li>性能调优与监控</li></ul><hr><h3 id="无-redis-架构" tabindex="-1"><a class="header-anchor" href="#无-redis-架构"><span>无 Redis 架构</span></a></h3><p>所有请求直接访问数据库，数据库压力大，响应慢。</p><hr><h3 id="使用-redis-的缓存架构" tabindex="-1"><a class="header-anchor" href="#使用-redis-的缓存架构"><span>使用 Redis 的缓存架构</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line">关系数据库是基于硬盘读写的，其效率和资源有限，而 Redis 是基于内存的，其读写速度差别很大。</span>
<span class="line">策略性将常访问数据放到 Redis 提高系统吞吐和并发量。</span>
<span class="line">通过 Redis 缓存热点数据，大幅减轻数据库压力，提升系统响应速度。</span>
<span class="line"></span>
<span class="line">速度快体现在：</span>
<span class="line"><span class="token number">1.</span> 基于内存，读写较快</span>
<span class="line"><span class="token number">2.</span> 使用哈希算法直接定位结果，不需要计算，直接 <span class="token keyword">key</span><span class="token operator">-</span><span class="token keyword">value</span> 获取结果</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="二、关系型与非关系型数据库" tabindex="-1"><a class="header-anchor" href="#二、关系型与非关系型数据库"><span>二、关系型与非关系型数据库</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line">关系型数据库 <span class="token keyword">SQL</span>：</span>
<span class="line">mysql  oracle  postgreSQL</span>
<span class="line"></span>
<span class="line">非关系型数据库 NoSQL（<span class="token operator">not</span> only <span class="token keyword">sql</span>）：</span>
<span class="line">redis  mongodb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">关系型数据库</th><th style="text-align:left;">非关系型数据库（如 Redis）</th></tr></thead><tbody><tr><td style="text-align:left;">数据结构</td><td style="text-align:left;">表结构固定</td><td style="text-align:left;">灵活（键值、文档、图等）</td></tr><tr><td style="text-align:left;">扩展性</td><td style="text-align:left;">垂直扩展为主</td><td style="text-align:left;">水平扩展能力强</td></tr><tr><td style="text-align:left;">事务支持</td><td style="text-align:left;">强一致性</td><td style="text-align:left;">最终一致性为主</td></tr><tr><td style="text-align:left;">适用场景</td><td style="text-align:left;">复杂查询、事务处理</td><td style="text-align:left;">高并发读写、缓存、消息队列</td></tr></tbody></table><hr><h2 id="三、redis-特性" tabindex="-1"><a class="header-anchor" href="#三、redis-特性"><span>三、Redis 特性</span></a></h2><ul><li>支持多种数据结构：字符串、哈希、列表、集合、有序集合等</li><li>高性能：基于内存操作，读写速度快</li><li>持久化：支持 RDB 和 AOF 两种持久化方式</li><li>内置高可用架构：支持主从复制、哨兵、集群模式</li><li>功能丰富：发布订阅、Lua 脚本、事务、流水线等</li></ul><hr><h2 id="四、redis-应用场景-面试重点" tabindex="-1"><a class="header-anchor" href="#四、redis-应用场景-面试重点"><span>四、Redis 应用场景（面试重点）</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token number">1.</span> 缓存（<span class="token keyword">key</span>过期特性）</span>
<span class="line">   <span class="token operator">-</span> 用户登录网站的 <span class="token keyword">session</span> 信息写入 Redis，过期后自动删除</span>
<span class="line">   <span class="token operator">-</span> 商城的优惠券过期</span>
<span class="line">   <span class="token operator">-</span> 短信验证码的过期</span>
<span class="line"></span>
<span class="line"><span class="token number">2.</span> 排行榜（列表、有序集合）</span>
<span class="line">   <span class="token operator">-</span> 抖音点赞点击量</span>
<span class="line">   <span class="token operator">-</span> 直播间打赏老板排行榜</span>
<span class="line"></span>
<span class="line"><span class="token number">3.</span> 计数器</span>
<span class="line">   <span class="token operator">-</span> 博客阅读量</span>
<span class="line">   <span class="token operator">-</span> 视频播放次数</span>
<span class="line">   <span class="token operator">-</span> 在线观看人数</span>
<span class="line">   <span class="token operator">-</span> 评论最新数量</span>
<span class="line">   <span class="token operator">-</span> 点赞、点踩</span>
<span class="line"></span>
<span class="line"><span class="token number">4.</span> 社交网络（集合数据类型）</span>
<span class="line">   <span class="token operator">-</span> 粉丝</span>
<span class="line">   <span class="token operator">-</span> 共同好友 <span class="token operator">/</span> 可能认识的人</span>
<span class="line">   <span class="token operator">-</span> 兴趣爱好 <span class="token operator">/</span> 同兴趣的人</span>
<span class="line">   <span class="token operator">-</span> 用户注册、账号是否已存在</span>
<span class="line"></span>
<span class="line"><span class="token number">5.</span> 消息队列（列表类型）</span>
<span class="line">   <span class="token operator">-</span> ELK 日志的缓存</span>
<span class="line">   <span class="token operator">-</span> 聊天记录</span>
<span class="line"></span>
<span class="line"><span class="token number">6.</span> 发布订阅</span>
<span class="line">   <span class="token operator">-</span> 粉丝关注通知</span>
<span class="line">   <span class="token operator">-</span> 粉丝群消息发布</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="五、redis-安装部署" tabindex="-1"><a class="header-anchor" href="#五、redis-安装部署"><span>五、Redis 安装部署</span></a></h2><h3 id="_5-1-版本选择" tabindex="-1"><a class="header-anchor" href="#_5-1-版本选择"><span>5.1 版本选择</span></a></h3><table><thead><tr><th style="text-align:left;">版本</th><th style="text-align:left;">主要新特性（关键演进）</th><th style="text-align:left;">当前状态与使用建议</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Redis 7.x</strong></td><td style="text-align:left;">Redis Functions、Multi-part AOF、命令参数验证、增强的 JSON 处理与集群管理</td><td style="text-align:left;">最新稳定系列，适合对新特性有明确需求且技术栈较新的项目，建议生产前充分测试</td></tr><tr><td style="text-align:left;"><strong>Redis 6.x</strong></td><td style="text-align:left;">ACL、多线程 I/O、客户端缓存、RESP3 协议、原生 SSL/TLS 支持</td><td style="text-align:left;">生产环境主流版本，云厂商默认或推荐版本，性能、安全、功能平衡，最稳妥的选择</td></tr><tr><td style="text-align:left;"><strong>Redis 5.x</strong></td><td style="text-align:left;">Stream 数据类型、RDB 格式优化、集群管理器移植到 redis-cli、Active Defragmentation v2</td><td style="text-align:left;">存量系统广泛使用，若业务重度依赖 Stream 可选此版本，新项目建议 6.x 或 7.x</td></tr><tr><td style="text-align:left;"><strong>Redis 4.0 及以下</strong></td><td style="text-align:left;">混合持久化、模块系统、PSYNC2 改进等</td><td style="text-align:left;">已逐步淘汰，主流云平台已停止支持</td></tr></tbody></table><hr><h3 id="_5-2-安装步骤-以-redis-6-2-4-为例" tabindex="-1"><a class="header-anchor" href="#_5-2-安装步骤-以-redis-6-2-4-为例"><span>5.2 安装步骤（以 Redis 6.2.4 为例）</span></a></h3><h4 id="编译安装" tabindex="-1"><a class="header-anchor" href="#编译安装"><span>编译安装</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 安装依赖</span></span>
<span class="line">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> epel-release <span class="token function">wget</span> <span class="token function">make</span> gcc-c++</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 下载并解压</span></span>
<span class="line"><span class="token builtin class-name">cd</span> /opt</span>
<span class="line"><span class="token function">wget</span> https://download.redis.io/releases/redis-6.2.4.tar.gz</span>
<span class="line"><span class="token function">tar</span> <span class="token parameter variable">-xf</span> redis-6.2.4.tar.gz</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 编译并安装到指定目录</span></span>
<span class="line"><span class="token builtin class-name">cd</span> redis-6.2.4</span>
<span class="line"><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="检查安装结果" tabindex="-1"><a class="header-anchor" href="#检查安装结果"><span>检查安装结果</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token builtin class-name">cd</span> /usr/local/redis/</span>
<span class="line"><span class="token function">ls</span> bin/</span>
<span class="line"><span class="token comment"># 应包含：</span></span>
<span class="line"><span class="token comment"># redis-benchmark  redis-check-aof  redis-check-rdb  redis-cli  redis-sentinel  redis-server</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="配置环境变量" tabindex="-1"><a class="header-anchor" href="#配置环境变量"><span>配置环境变量</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&#39;export PATH=$PATH:/usr/local/redis/bin/&#39;</span> <span class="token operator">&gt;&gt;</span> /etc/profile</span>
<span class="line"><span class="token builtin class-name">source</span> /etc/profile</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="六、redis-配置文件详解" tabindex="-1"><a class="header-anchor" href="#六、redis-配置文件详解"><span>六、Redis 配置文件详解</span></a></h2><h3 id="_6-1-配置文件创建与解释" tabindex="-1"><a class="header-anchor" href="#_6-1-配置文件创建与解释"><span>6.1 配置文件创建与解释</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 创建 Redis 用户和目录</span></span>
<span class="line"><span class="token function">useradd</span> redis <span class="token parameter variable">-M</span> <span class="token parameter variable">-s</span> /sbin/nologin</span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /redis/<span class="token punctuation">{</span>data,logs,pid<span class="token punctuation">}</span></span>
<span class="line"><span class="token function">chown</span> <span class="token parameter variable">-R</span> redis.redis /redis</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 创建配置文件</span></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/redis.conf <span class="token operator">&lt;&lt;</span><span class="token string">&#39;EOF&#39;</span>
<span class="line">daemonize yes                # 以守护进程方式运行</span>
<span class="line">bind 0.0.0.0                 # 监听所有 IP，生产环境建议指定内网 IP</span>
<span class="line">port 6379                    # 默认端口</span>
<span class="line">pidfile /redis/pid/redis_6379.pid</span>
<span class="line">logfile /redis/logs/redis_6379.log</span>
<span class="line">dir /redis/data              # 持久化文件存储目录</span>
<span class="line">requirepass yourpassword     # 访问密码，生产环境必须设置</span>
<span class="line">maxmemory-policy allkeys-lru # 内存满时淘汰策略</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="bind-参数说明-安全建议" tabindex="-1"><a class="header-anchor" href="#bind-参数说明-安全建议"><span><code>bind</code> 参数说明（安全建议）：</span></a></h4><ul><li><code>bind 127.0.0.1</code>：仅本地访问，最安全</li><li><code>bind 10.0.0.51 172.16.1.51</code>：仅允许指定 IP 访问</li><li><code>bind 0.0.0.0</code>：允许所有 IP 访问（需配合防火墙和密码）</li></ul><hr><h3 id="_6-2-systemd-服务配置" tabindex="-1"><a class="header-anchor" href="#_6-2-systemd-服务配置"><span>6.2 Systemd 服务配置</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/systemd/system/redis.service <span class="token operator">&lt;&lt;</span><span class="token string">&#39;EOF&#39;</span>
<span class="line">[Unit]</span>
<span class="line">Description=Redis persistent key-value database</span>
<span class="line">After=network.target</span>
<span class="line">After=network-online.target</span>
<span class="line">Wants=network-online.target</span>
<span class="line"></span>
<span class="line">[Service]</span>
<span class="line">Type=forking</span>
<span class="line">PIDFile=/redis/pid/redis_6379.pid</span>
<span class="line">ExecStart=/usr/local/redis/bin/redis-server /etc/redis.conf</span>
<span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span>
<span class="line">ExecStop=/bin/kill -s QUIT $MAINPID</span>
<span class="line">User=redis</span>
<span class="line">Group=redis</span>
<span class="line"></span>
<span class="line">[Install]</span>
<span class="line">WantedBy=multi-user.target</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>启动并设置开机自启：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">systemctl daemon-reload</span>
<span class="line">systemctl <span class="token builtin class-name">enable</span> redis</span>
<span class="line">systemctl start redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="七、redis-启动、关闭与连接" tabindex="-1"><a class="header-anchor" href="#七、redis-启动、关闭与连接"><span>七、Redis 启动、关闭与连接</span></a></h2><h3 id="_7-1-启动方式" tabindex="-1"><a class="header-anchor" href="#_7-1-启动方式"><span>7.1 启动方式</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 直接启动</span></span>
<span class="line">/usr/local/redis/bin/redis-server /etc/redis.conf</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 使用 systemctl</span></span>
<span class="line">systemctl start redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_7-2-连接-redis" tabindex="-1"><a class="header-anchor" href="#_7-2-连接-redis"><span>7.2 连接 Redis</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 本地连接（无密码）</span></span>
<span class="line">redis-cli</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 远程连接（带密码）</span></span>
<span class="line">redis-cli <span class="token parameter variable">-h</span> <span class="token number">10.0</span>.0.51 <span class="token parameter variable">-p</span> <span class="token number">6379</span> <span class="token parameter variable">-a</span> yourpassword</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 交互式认证</span></span>
<span class="line">redis-cli <span class="token parameter variable">-h</span> <span class="token number">10.0</span>.0.51 <span class="token parameter variable">-p</span> <span class="token number">6379</span></span>
<span class="line"><span class="token operator">&gt;</span> auth yourpassword</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_7-3-关闭-redis" tabindex="-1"><a class="header-anchor" href="#_7-3-关闭-redis"><span>7.3 关闭 Redis</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 优雅关闭（会触发持久化）</span></span>
<span class="line">redis-cli <span class="token parameter variable">-a</span> yourpassword <span class="token function">shutdown</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 或使用 systemctl</span></span>
<span class="line">systemctl stop redis</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 强制关闭（不推荐，可能导致数据丢失）</span></span>
<span class="line"><span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /redis/pid/redis_6379.pid<span class="token variable">)</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_7-4-基本操作示例" tabindex="-1"><a class="header-anchor" href="#_7-4-基本操作示例"><span>7.4 基本操作示例</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 写入数据</span></span>
<span class="line"><span class="token builtin class-name">set</span> name <span class="token string">&quot;linux0224&quot;</span></span>
<span class="line"><span class="token builtin class-name">set</span> name2 <span class="token string">&quot;尖角大王&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 读取数据（中文需加 --raw）</span></span>
<span class="line">redis-cli <span class="token parameter variable">--raw</span> get name2</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看 key 数量</span></span>
<span class="line">dbsize</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_7-5-python-连接示例" tabindex="-1"><a class="header-anchor" href="#_7-5-python-连接示例"><span>7.5 Python 连接示例</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code class="language-python"><span class="line"><span class="token keyword">import</span> redis</span>
<span class="line">conn <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;10.0.0.51&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">&#39;yourpassword&#39;</span><span class="token punctuation">)</span></span>
<span class="line">value <span class="token operator">=</span> conn<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="八、redis-日志警告与系统优化" tabindex="-1"><a class="header-anchor" href="#八、redis-日志警告与系统优化"><span>八、Redis 日志警告与系统优化</span></a></h2><h3 id="_8-1-常见警告及修复" tabindex="-1"><a class="header-anchor" href="#_8-1-常见警告及修复"><span>8.1 常见警告及修复</span></a></h3><table><thead><tr><th style="text-align:left;">警告信息</th><th style="text-align:left;">问题分析</th><th style="text-align:left;">临时修复</th><th style="text-align:left;">永久修复</th></tr></thead><tbody><tr><td style="text-align:left;"><code>WARNING: The TCP backlog setting of 511 cannot be enforced...</code></td><td style="text-align:left;">TCP 连接队列过小</td><td style="text-align:left;"><code>sysctl -w net.core.somaxconn=1024</code></td><td style="text-align:left;">在 <code>/etc/sysctl.conf</code> 添加 <code>net.core.somaxconn=1024</code></td></tr><tr><td style="text-align:left;"><code>WARNING overcommit_memory is set to 0!...</code></td><td style="text-align:left;">内存分配策略保守，可能导致持久化失败</td><td style="text-align:left;"><code>sysctl -w vm.overcommit_memory=1</code></td><td style="text-align:left;">在 <code>/etc/sysctl.conf</code> 添加 <code>vm.overcommit_memory=1</code></td></tr></tbody></table><hr><h3 id="_8-2-一键优化脚本" tabindex="-1"><a class="header-anchor" href="#_8-2-一键优化脚本"><span>8.2 一键优化脚本</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">cp</span> /etc/sysctl.conf /etc/sysctl.conf.bak.<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y%m%d<span class="token variable">)</span></span></span>
<span class="line"></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&gt;&gt;</span> /etc/sysctl.conf <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line"># Redis 优化参数 - <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span></span>
<span class="line">net.core.somaxconn = 1024</span>
<span class="line">vm.overcommit_memory = 1</span>
<span class="line">EOF</span></span>
<span class="line"></span>
<span class="line"><span class="token function">sysctl</span> <span class="token parameter variable">-p</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="九、redis-安全加固建议" tabindex="-1"><a class="header-anchor" href="#九、redis-安全加固建议"><span>九、Redis 安全加固建议</span></a></h2><ol><li><p><strong>设置访问密码</strong>：<code>requirepass yourpassword</code></p></li><li><p><strong>限制绑定 IP</strong>：仅绑定内网 IP，如 <code>bind 10.0.0.51</code></p></li><li><p><strong>禁用高危命令</strong>：在配置文件中添加：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">rename-command FLUSHALL &quot;&quot;</span>
<span class="line">rename-command FLUSHDB &quot;&quot;</span>
<span class="line">rename-command CONFIG &quot;&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>防火墙限制</strong>：仅允许应用服务器访问 Redis 端口</p></li><li><p><strong>使用非默认端口</strong>：修改 <code>port</code> 参数</p></li><li><p><strong>启用 TLS 传输加密</strong>（Redis 6.x+）</p></li></ol><hr><h2 id="十、总结" tabindex="-1"><a class="header-anchor" href="#十、总结"><span>十、总结</span></a></h2><h3 id="学习要点回顾" tabindex="-1"><a class="header-anchor" href="#学习要点回顾"><span>学习要点回顾：</span></a></h3><ol><li>Redis 的核心价值：高性能、丰富数据结构、高可用</li><li>应用场景：缓存、队列、计数器、社交、排行榜等</li><li>安装与配置：源码编译、配置文件详解、系统服务集成</li><li>安全与优化：密码、绑定 IP、系统参数调优</li></ol><hr><h3 id="建议" tabindex="-1"><a class="header-anchor" href="#建议"><span>建议：</span></a></h3><ol><li>在本地或云服务器上部署 Redis 6.x</li><li>尝试使用 Python/Java 连接并操作 Redis</li><li>模拟缓存场景：将 MySQL 热点数据缓存至 Redis</li><li>学习 Redis 持久化（RDB/AOF）配置与恢复</li></ol>`,87)])])}const r=n(i,[["render",t]]),c=JSON.parse('{"path":"/09-%E4%B8%AD%E9%97%B4%E4%BB%B6/03-redis/1-redis%E5%85%A5%E9%97%A8.html","title":"高并发缓存中间件 Redis","lang":"zh-CN","frontmatter":{},"git":{"contributors":[{"name":"opsjjq","username":"opsjjq","email":"wangyp987@gmail.com","commits":1,"url":"https://github.com/opsjjq"}],"changelog":[{"hash":"ca8e661b7c6729c958583ed3d1a001b6de398273","time":1771558748000,"email":"wangyp987@gmail.com","author":"opsjjq","message":"222"}]},"filePathRelative":"09-中间件/03-redis/1-redis入门.md"}');export{r as comp,c as data};
