import{_ as a,c as n,e,o as l}from"./app-DtXLoKBz.js";const p={};function i(t,s){return l(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="rsync-备份实践" tabindex="-1"><a class="header-anchor" href="#rsync-备份实践"><span>Rsync 备份实践</span></a></h1><hr><h2 id="一、rsync-排除操作" tabindex="-1"><a class="header-anchor" href="#一、rsync-排除操作"><span>一、Rsync 排除操作</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">rsync</span> <span class="token parameter variable">-avzP</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span>b.png /tmp/ rsync_backup@10.0.0.41::data</span>
<span class="line"><span class="token function">rsync</span> <span class="token parameter variable">-avzP</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span>d1 /tmp/ rsync_backup@10.0.0.41::data</span>
<span class="line"><span class="token function">rsync</span> <span class="token parameter variable">-avzP</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span><span class="token string">&#39;*.log&#39;</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span><span class="token string">&#39;tmp/&#39;</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span><span class="token string">&#39;.git/&#39;</span> <span class="token punctuation">\\</span></span>
<span class="line">    /source/ rsync_backup@10.0.0.41::backup</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="二、备份架构" tabindex="-1"><a class="header-anchor" href="#二、备份架构"><span>二、备份架构</span></a></h2><h3 id="_2-1-架构说明" tabindex="-1"><a class="header-anchor" href="#_2-1-架构说明"><span>2.1 架构说明</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">客户端 → rsync 服务端 → 数据备份存储</span>
<span class="line">         ↓</span>
<span class="line">      邮件通知</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-服务器角色" tabindex="-1"><a class="header-anchor" href="#_2-2-服务器角色"><span>2.2 服务器角色</span></a></h3><table><thead><tr><th style="text-align:left;">服务器</th><th style="text-align:left;">IP 地址</th><th style="text-align:left;">角色</th></tr></thead><tbody><tr><td style="text-align:left;">nfs-31</td><td style="text-align:left;">10.0.0.31</td><td style="text-align:left;">备份客户端</td></tr><tr><td style="text-align:left;">rsync-41</td><td style="text-align:left;">10.0.0.41</td><td style="text-align:left;">rsync 备份服务端</td></tr></tbody></table><hr><h2 id="三、客户端配置" tabindex="-1"><a class="header-anchor" href="#三、客户端配置"><span>三、客户端配置</span></a></h2><h3 id="_3-1-备份脚本" tabindex="-1"><a class="header-anchor" href="#_3-1-备份脚本"><span>3.1 备份脚本</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"><span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 0. 删除七天之前的旧文件</span></span>
<span class="line"><span class="token function">find</span> /backup <span class="token parameter variable">-type</span> f <span class="token parameter variable">-mtime</span> +7 <span class="token parameter variable">-delete</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 1. 创建目录</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /backup/<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;NR==2{print $2}&#39;</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. 打包备份数据</span></span>
<span class="line"><span class="token builtin class-name">cd</span> / <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> <span class="token parameter variable">-zcf</span> /backup/<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;NR==2{print $2}&#39;</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/etc.tgz etc</span>
<span class="line"><span class="token builtin class-name">cd</span> / <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> <span class="token parameter variable">-zcf</span> /backup/<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;NR==2{print $2}&#39;</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/log.tgz var/log</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2.1 生成校验文件</span></span>
<span class="line">md5sum /backup/<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;NR==2{print $2}&#39;</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/*.tgz <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token operator">&gt;</span> /backup/<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;NR==2{print $2}&#39;</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/all_data_md5.txt</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. 传输数据到 rsync 服务器</span></span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">RSYNC_PASSWORD</span><span class="token operator">=</span>qwe123</span>
<span class="line"><span class="token function">rsync</span> <span class="token parameter variable">-avzP</span> /backup/ rsync_backup@rsync41::bak</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4. 删除本地旧文件</span></span>
<span class="line"><span class="token function">find</span> /backup <span class="token parameter variable">-type</span> f <span class="token parameter variable">-mtime</span> +7 <span class="token parameter variable">-delete</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-调试脚本" tabindex="-1"><a class="header-anchor" href="#_3-2-调试脚本"><span>3.2 调试脚本</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">bash</span> <span class="token parameter variable">-x</span> /opt/my_rsync.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-3-定时任务" tabindex="-1"><a class="header-anchor" href="#_3-3-定时任务"><span>3.3 定时任务</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 确保 crond 服务运行</span></span>
<span class="line">systemctl status crond</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 添加定时任务</span></span>
<span class="line"><span class="token function">crontab</span> <span class="token parameter variable">-e</span></span>
<span class="line"><span class="token number">0</span> <span class="token number">1</span> * * * /bin/bash /opt/my_rsync.sh</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 删除所有定时任务</span></span>
<span class="line"><span class="token function">crontab</span> <span class="token parameter variable">-r</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="四、服务端配置" tabindex="-1"><a class="header-anchor" href="#四、服务端配置"><span>四、服务端配置</span></a></h2><h3 id="_4-1-安装脚本" tabindex="-1"><a class="header-anchor" href="#_4-1-安装脚本"><span>4.1 安装脚本</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 1. 安装 rsync 服务</span></span>
<span class="line">yum <span class="token function">install</span> <span class="token function">rsync</span> <span class="token parameter variable">-y</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. 写配置文件</span></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/rsyncd.conf <span class="token operator">&lt;&lt;</span> <span class="token string">&#39;EOF&#39;</span>
<span class="line">uid = www</span>
<span class="line">gid = www</span>
<span class="line">port = 873</span>
<span class="line">fake super = yes</span>
<span class="line">use chroot = no</span>
<span class="line">max connections = 200</span>
<span class="line">timeout = 600</span>
<span class="line">ignore errors</span>
<span class="line">read only = false</span>
<span class="line">list = false</span>
<span class="line">auth users = usr41</span>
<span class="line">secrets file = /etc/usr41.passwd</span>
<span class="line">log file = /var/log/rsyncd.log</span>
<span class="line"></span>
<span class="line">[bak]</span>
<span class="line">comment = backup directory</span>
<span class="line">path = /backup</span>
<span class="line"></span>
<span class="line">[data]</span>
<span class="line">path = /data</span>
<span class="line">EOF</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. 创建用户和目录</span></span>
<span class="line"><span class="token function">useradd</span> <span class="token parameter variable">-u</span> <span class="token number">1000</span> <span class="token parameter variable">-M</span> <span class="token parameter variable">-s</span> /sbin/nologin www</span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /<span class="token punctuation">{</span>backup,data<span class="token punctuation">}</span></span>
<span class="line"><span class="token function">chown</span> <span class="token parameter variable">-R</span> www.www /backup</span>
<span class="line"><span class="token function">chown</span> <span class="token parameter variable">-R</span> www.www /data</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4. 创建密码文件</span></span>
<span class="line"><span class="token function">touch</span> /etc/usr41.passwd</span>
<span class="line"><span class="token function">chmod</span> <span class="token number">600</span> /etc/usr41.passwd</span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;usr41:qwe123&quot;</span> <span class="token operator">&gt;</span> /etc/usr41.passwd</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 5. 启动服务</span></span>
<span class="line">systemctl restart rsyncd</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="五、数据校验" tabindex="-1"><a class="header-anchor" href="#五、数据校验"><span>五、数据校验</span></a></h2><h3 id="_5-1-校验命令" tabindex="-1"><a class="header-anchor" href="#_5-1-校验命令"><span>5.1 校验命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">md5sum /backup/<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">ifconfig</span> eth0 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;NR==2{print $2}&#39;</span><span class="token variable">)</span></span>_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/*.tgz <span class="token operator">&gt;</span> size.txt</span>
<span class="line">md5sum <span class="token parameter variable">-c</span> size.txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-校验结果说明" tabindex="-1"><a class="header-anchor" href="#_5-2-校验结果说明"><span>5.2 校验结果说明</span></a></h3><table><thead><tr><th style="text-align:left;">结果</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">OK</td><td style="text-align:left;">文件校验通过</td></tr><tr><td style="text-align:left;">FAILED</td><td style="text-align:left;">文件已损坏</td></tr></tbody></table><hr><h2 id="六、邮件通知" tabindex="-1"><a class="header-anchor" href="#六、邮件通知"><span>六、邮件通知</span></a></h2><h3 id="_6-1-配置-mailx" tabindex="-1"><a class="header-anchor" href="#_6-1-配置-mailx"><span>6.1 配置 mailx</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">yum <span class="token function">install</span> mailx <span class="token parameter variable">-y</span></span>
<span class="line"></span>
<span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/mail.rc <span class="token operator">&lt;&lt;</span> <span class="token string">&#39;EOF&#39;</span>
<span class="line">set from=3011637329@qq.com</span>
<span class="line">set smtp=smtps://smtp.qq.com:465</span>
<span class="line">set smtp-auth-user=3011637329@qq.com</span>
<span class="line">set smtp-auth-password=授权码</span>
<span class="line">set smtp-auth=login</span>
<span class="line">set ssl-verify=ignore</span>
<span class="line">set nss-config-dir=/etc/pki/nssdb/</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-发送校验邮件" tabindex="-1"><a class="header-anchor" href="#_6-2-发送校验邮件"><span>6.2 发送校验邮件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">md5sum <span class="token parameter variable">-c</span> all_data_md5.txt <span class="token operator">&gt;</span> check_md5result.txt</span>
<span class="line">mail <span class="token parameter variable">-s</span> <span class="token string">&quot;check-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%F<span class="token variable">)</span></span>&quot;</span> <span class="token number">3011637329</span>@qq.com <span class="token operator">&lt;</span> check_md5result.txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="七、服务端汇总脚本" tabindex="-1"><a class="header-anchor" href="#七、服务端汇总脚本"><span>七、服务端汇总脚本</span></a></h2><h3 id="_7-1-服务端校验脚本" tabindex="-1"><a class="header-anchor" href="#_7-1-服务端校验脚本"><span>7.1 服务端校验脚本</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 1. 校验备份数据</span></span>
<span class="line">md5sum <span class="token parameter variable">-c</span> /bak/nfs-31_10.0.0.31_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/all_data_md5.txt <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token operator">&gt;</span> /bak/nfs31_10.0.0.31_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/check_md5result.txt</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. 发送邮件</span></span>
<span class="line">mail <span class="token parameter variable">-s</span> <span class="token string">&quot;name-check-rsync-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%F<span class="token variable">)</span></span>&quot;</span> <span class="token number">3011637329</span>@qq.com <span class="token punctuation">\\</span></span>
<span class="line">    <span class="token operator">&lt;</span> /bak/nfs31_10.0.0.31_<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&quot;+%F&quot;</span><span class="token variable">)</span></span>/check_md5result.txt</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. 删除旧数据（保留 180 天）</span></span>
<span class="line"><span class="token function">find</span> /bak <span class="token parameter variable">-type</span> f <span class="token parameter variable">-mtime</span> +180 <span class="token parameter variable">-delete</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-定时校验" tabindex="-1"><a class="header-anchor" href="#_7-2-定时校验"><span>7.2 定时校验</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">crontab</span> <span class="token parameter variable">-e</span></span>
<span class="line"><span class="token number">0</span> <span class="token number">2</span> * * * /bin/bash /opt/my_rsync_server.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="八、过期文件删除" tabindex="-1"><a class="header-anchor" href="#八、过期文件删除"><span>八、过期文件删除</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 服务端删除 6 个月前的备份数据</span></span>
<span class="line"><span class="token function">find</span> /momo <span class="token parameter variable">-type</span> f <span class="token parameter variable">-mtime</span> +180 <span class="token parameter variable">-delete</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,43)])])}const r=a(p,[["render",i]]),o=JSON.parse('{"path":"/02-Linux%E8%BF%9B%E9%98%B6/04-%E6%96%87%E4%BB%B6%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%AD%98%E5%82%A8/rsync%E7%BB%83%E4%B9%A0.html","title":"Rsync 备份实践","lang":"zh-CN","frontmatter":{},"git":{"contributors":[{"name":"opsjjq","username":"opsjjq","email":"wangyp987@gmail.com","commits":1,"url":"https://github.com/opsjjq"}],"changelog":[{"hash":"ca8e661b7c6729c958583ed3d1a001b6de398273","time":1771558748000,"email":"wangyp987@gmail.com","author":"opsjjq","message":"222"}]},"filePathRelative":"02-Linux进阶/04-文件同步与存储/rsync练习.md"}');export{r as comp,o as data};
