import{_ as t,c as a,e as s,o as l}from"./app-DtXLoKBz.js";const n={};function i(d,e){return l(),a("div",null,[...e[0]||(e[0]=[s(`<h1 id="堡垒机实践指南" tabindex="-1"><a class="header-anchor" href="#堡垒机实践指南"><span>堡垒机实践指南</span></a></h1><hr><h2 id="一、用户管理与权限控制" tabindex="-1"><a class="header-anchor" href="#一、用户管理与权限控制"><span>一、用户管理与权限控制</span></a></h2><h3 id="_1-1-修改登录密码" tabindex="-1"><a class="header-anchor" href="#_1-1-修改登录密码"><span>1.1 修改登录密码</span></a></h3><ul><li><strong>首次登录</strong>：系统会强制修改初始密码</li><li><strong>后续修改</strong>：<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">个人信息 → 登录密码设置 → 修改密码</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h3 id="_1-2-用户角色说明" tabindex="-1"><a class="header-anchor" href="#_1-2-用户角色说明"><span>1.2 用户角色说明</span></a></h3><table><thead><tr><th style="text-align:left;">角色</th><th style="text-align:left;">权限范围</th><th style="text-align:left;">示例用户</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>管理员</strong></td><td style="text-align:left;">最高权限，管理所有资产</td><td style="text-align:left;">admin</td></tr><tr><td style="text-align:left;"><strong>普通用户</strong></td><td style="text-align:left;">受限权限，仅查看授权资产</td><td style="text-align:left;">usr163</td></tr></tbody></table><hr><h2 id="二、系统配置" tabindex="-1"><a class="header-anchor" href="#二、系统配置"><span>二、系统配置</span></a></h2><h3 id="_2-1-站点url设置" tabindex="-1"><a class="header-anchor" href="#_2-1-站点url设置"><span>2.1 站点URL设置</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">系统设置 → 站点设置</span>
<span class="line">配置访问地址：http://10.0.0.61</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-邮件功能配置" tabindex="-1"><a class="header-anchor" href="#_2-2-邮件功能配置"><span>2.2 邮件功能配置</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">系统设置 → 邮件设置</span>
<span class="line">配置SMTP服务器信息：</span>
<span class="line">- 发件人邮箱（如：yc_uuu@163.com）</span>
<span class="line">- SMTP服务器地址</span>
<span class="line">- 邮箱授权码（非登录密码）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="三、用户与资产管理" tabindex="-1"><a class="header-anchor" href="#三、用户与资产管理"><span>三、用户与资产管理</span></a></h2><h3 id="_3-1-两种用户类型" tabindex="-1"><a class="header-anchor" href="#_3-1-两种用户类型"><span>3.1 两种用户类型</span></a></h3><table><thead><tr><th style="text-align:left;">类型</th><th style="text-align:left;">用途</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>堡垒机平台用户</strong></td><td style="text-align:left;">登录Web界面或koko服务</td></tr><tr><td style="text-align:left;"><strong>目标服务器系统用户</strong></td><td style="text-align:left;">Linux服务器实际账户</td></tr></tbody></table><p><strong>系统用户分类</strong>：</p><ul><li>root 超级用户</li><li>sudo 特权用户（如 pp01）</li><li>普通用户（如 nn01）</li></ul><h3 id="_3-2-连接方式区分" tabindex="-1"><a class="header-anchor" href="#_3-2-连接方式区分"><span>3.2 连接方式区分</span></a></h3><table><thead><tr><th style="text-align:left;">端口</th><th style="text-align:left;">服务</th><th style="text-align:left;">使用用户类型</th></tr></thead><tbody><tr><td style="text-align:left;">2222</td><td style="text-align:left;">koko</td><td style="text-align:left;">堡垒机平台用户</td></tr><tr><td style="text-align:left;">22</td><td style="text-align:left;">SSH</td><td style="text-align:left;">目标服务器系统用户</td></tr></tbody></table><hr><h2 id="四、资产创建与管理" tabindex="-1"><a class="header-anchor" href="#四、资产创建与管理"><span>四、资产创建与管理</span></a></h2><h3 id="_4-1-添加服务器资产" tabindex="-1"><a class="header-anchor" href="#_4-1-添加服务器资产"><span>4.1 添加服务器资产</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">资产管理 → 资产列表</span>
<span class="line">步骤：</span>
<span class="line">1. 创建资产组（如：database、web）</span>
<span class="line">2. 添加具体服务器（如：db-51、web-7）</span>
<span class="line">3. 配置连接信息（IP地址、协议等）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-配置系统用户" tabindex="-1"><a class="header-anchor" href="#_4-2-配置系统用户"><span>4.2 配置系统用户</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">资产管理 → 系统用户</span>
<span class="line">创建两种类型用户：</span>
<span class="line">1. 特权用户（pp01）</span>
<span class="line">   - 在目标服务器上需配置sudo权限</span>
<span class="line">   - visudo添加：pp01 ALL=(ALL) NOPASSWD: ALL</span>
<span class="line"></span>
<span class="line">2. 普通用户（nn01）</span>
<span class="line">   - 无特殊权限的系统用户</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-资产绑定用户" tabindex="-1"><a class="header-anchor" href="#_4-3-资产绑定用户"><span>4.3 资产绑定用户</span></a></h3><ul><li>为每个资产绑定管理用户（特权用户）</li><li>使用 pp01 作为特权用户通过 Ansible 进行远程管理</li><li>配置完成后测试连接：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">ansible db-51 <span class="token parameter variable">-m</span> <span class="token function">ping</span></span>
<span class="line">ansible db-51 <span class="token parameter variable">-m</span> setup</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="五、资产授权规则" tabindex="-1"><a class="header-anchor" href="#五、资产授权规则"><span>五、资产授权规则</span></a></h2><h3 id="_5-1-创建授权规则" tabindex="-1"><a class="header-anchor" href="#_5-1-创建授权规则"><span>5.1 创建授权规则</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">权限管理 → 资产授权</span>
<span class="line">创建规则包含：</span>
<span class="line">1. 规则名称</span>
<span class="line">2. 用户/用户组</span>
<span class="line">3. 资产/资产节点</span>
<span class="line">4. 系统用户（登录目标服务器用）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-授权案例演示" tabindex="-1"><a class="header-anchor" href="#_5-2-授权案例演示"><span>5.2 授权案例演示</span></a></h3><p><strong>案例1：管理员全权限</strong></p><table><thead><tr><th style="text-align:left;">配置项</th><th style="text-align:left;">值</th></tr></thead><tbody><tr><td style="text-align:left;">用户</td><td style="text-align:left;">ops01（管理员）</td></tr><tr><td style="text-align:left;">系统用户</td><td style="text-align:left;">pp01（特权用户）</td></tr><tr><td style="text-align:left;">资产</td><td style="text-align:left;">所有服务器</td></tr></tbody></table><p><strong>案例2：普通用户受限权限</strong></p><table><thead><tr><th style="text-align:left;">配置项</th><th style="text-align:left;">值</th></tr></thead><tbody><tr><td style="text-align:left;">用户</td><td style="text-align:left;">usr163（普通用户）</td></tr><tr><td style="text-align:left;">系统用户</td><td style="text-align:left;">nn01（普通用户）</td></tr><tr><td style="text-align:left;">资产</td><td style="text-align:left;">仅 db-51、db-52</td></tr></tbody></table><h3 id="_5-3-用户组管理" tabindex="-1"><a class="header-anchor" href="#_5-3-用户组管理"><span>5.3 用户组管理</span></a></h3><ol><li>创建用户组（如：usr 组）</li><li>将用户分配到对应组</li><li>基于用户组进行批量授权</li></ol><hr><h2 id="六、会话监控与审计" tabindex="-1"><a class="header-anchor" href="#六、会话监控与审计"><span>六、会话监控与审计</span></a></h2><h3 id="_6-1-实时监控功能" tabindex="-1"><a class="header-anchor" href="#_6-1-实时监控功能"><span>6.1 实时监控功能</span></a></h3><ul><li><strong>会话管理</strong>：查看当前在线会话</li><li><strong>会话监控</strong>：实时查看用户操作</li><li><strong>强制下线</strong>：中断异常或违规会话</li></ul><h3 id="_6-2-审计记录功能" tabindex="-1"><a class="header-anchor" href="#_6-2-审计记录功能"><span>6.2 审计记录功能</span></a></h3><table><thead><tr><th style="text-align:left;">功能</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>视频回放</strong></td><td style="text-align:left;">完整记录操作过程</td></tr><tr><td style="text-align:left;"><strong>命令历史</strong></td><td style="text-align:left;">记录所有执行命令</td></tr><tr><td style="text-align:left;"><strong>会话日志</strong></td><td style="text-align:left;">保存连接和操作日志</td></tr></tbody></table><hr><h2 id="七、koko跳板机使用" tabindex="-1"><a class="header-anchor" href="#七、koko跳板机使用"><span>七、koko跳板机使用</span></a></h2><h3 id="_7-1-连接方式" tabindex="-1"><a class="header-anchor" href="#_7-1-连接方式"><span>7.1 连接方式</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">ssh</span> 用户名@10.0.0.61 <span class="token parameter variable">-p</span> <span class="token number">2222</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-2-工作原理" tabindex="-1"><a class="header-anchor" href="#_7-2-工作原理"><span>7.2 工作原理</span></a></h3><ul><li>所有 SSH 请求通过 koko 服务转发</li><li>koko 记录所有操作并同步到 core 服务</li><li>实现统一的访问控制和审计</li></ul><hr><h2 id="八、实践作业要求" tabindex="-1"><a class="header-anchor" href="#八、实践作业要求"><span>八、实践作业要求</span></a></h2><h3 id="_8-1-部署任务" tabindex="-1"><a class="header-anchor" href="#_8-1-部署任务"><span>8.1 部署任务</span></a></h3><ol><li>完成堡垒机完整部署</li><li>确保服务能正常重启</li><li>掌握前后端分离部署流程</li></ol><h3 id="_8-2-功能演示" tabindex="-1"><a class="header-anchor" href="#_8-2-功能演示"><span>8.2 功能演示</span></a></h3><ol><li>用户创建与管理</li><li>资产添加与配置</li><li>授权规则设置</li><li>会话监控与审计</li></ol><h3 id="_8-3-重点难点" tabindex="-1"><a class="header-anchor" href="#_8-3-重点难点"><span>8.3 重点难点</span></a></h3><ul><li>用户角色与权限理解</li><li>资产与用户的绑定关系</li><li>授权规则的配置逻辑</li><li>实际应用场景的配置</li></ul><hr><h2 id="九、安全注意事项" tabindex="-1"><a class="header-anchor" href="#九、安全注意事项"><span>九、安全注意事项</span></a></h2><ol><li><p><strong>密码管理</strong></p><ul><li>初始密码必须修改</li><li>定期更新密码</li><li>避免使用弱密码</li></ul></li><li><p><strong>权限分配原则</strong></p><ul><li>最小权限原则</li><li>按需分配权限</li><li>定期审核权限</li></ul></li><li><p><strong>审计要求</strong></p><ul><li>所有操作必须可追溯</li><li>定期审查操作日志</li><li>异常行为及时处理</li></ul></li></ol><hr><h2 id="十、故障排查要点" tabindex="-1"><a class="header-anchor" href="#十、故障排查要点"><span>十、故障排查要点</span></a></h2><table><thead><tr><th style="text-align:left;">问题类型</th><th style="text-align:left;">排查方法</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>连接问题</strong></td><td style="text-align:left;">检查网络连通性、验证端口开放情况</td></tr><tr><td style="text-align:left;"><strong>权限问题</strong></td><td style="text-align:left;">检查授权规则、验证系统用户配置</td></tr><tr><td style="text-align:left;"><strong>功能异常</strong></td><td style="text-align:left;">检查服务状态、查看系统日志</td></tr></tbody></table>`,67)])])}const h=t(n,[["render",i]]),p=JSON.parse('{"path":"/10-%E5%A0%A1%E5%9E%92%E6%9C%BA%E8%BF%90%E7%BB%B4/01-%E5%A0%A1%E5%9E%92%E6%9C%BA%E8%BF%90%E7%BB%B4/%E5%A0%A1%E5%9E%92%E6%9C%BA%E5%BA%94%E7%94%A8%E5%AE%9E%E8%B7%B5.html","title":"堡垒机实践指南","lang":"zh-CN","frontmatter":{},"git":{"contributors":[{"name":"opsjjq","username":"opsjjq","email":"wangyp987@gmail.com","commits":1,"url":"https://github.com/opsjjq"}],"changelog":[{"hash":"ca8e661b7c6729c958583ed3d1a001b6de398273","time":1771558748000,"email":"wangyp987@gmail.com","author":"opsjjq","message":"222"}]},"filePathRelative":"10-堡垒机运维/01-堡垒机运维/堡垒机应用实践.md"}');export{h as comp,p as data};
