# Linux 通配符特殊符号详解

---

## 一、概念区分

| 类型 | 用途 | 匹配对象 | 示例 |
| :--- | :--- | :--- | :--- |
| **通配符** | 匹配文件名 | 文件名 | `ls *.txt` |
| **正则表达式** | 匹配文件内容 | 字符串 | `grep "error" log` |

---

## 二、通配符详解

### 1. 什么是通配符？

- 用于根据**文件名**查找文件
- Shell 内置语法，大部分 Linux 命令都支持
- **不用于文件内容匹配**

### 2. 通配符语法表

| 字符             | 说明                       | 示例                            |
| :--------------- | :------------------------- | :------------------------------ |
| `*`              | 匹配任意数量的任意字符     | `ls /opt/my*.txt`               |
| `?`              | 在特定位置匹配单个字符     | `ls /opt/myfis?.txt`            |
| `[ ]`            | 匹配方括号内的任意一个字符 | `ls /opt/myfirs[a-z].txt`       |
| `[! ]` 或 `[^ ]` | 排除方括号内的字符         | `ls myfirs[!a-g].txt`           |
| `-`              | 指定字符范围（必须升序）   | `[a-z]`, `[A-Z]`, `[0-9a-zA-Z]` |

------

## 三、通配符实战示例

### 测试数据准备

```sh
mkdir /test && cd /test
touch test.txt testc.txt cc.txt test01.log  cc.sh
```

### 1. `*` 星号匹配

```sh
# 找出所有txt结尾的文件
ls *.txt

# 找出以t开头的txt文件
ls t*.txt

# 找出机器上所有的sh文件
find / -name '*.sh'

# 找出以数字开头的sh文件
find / -name '[0-9]*.sh'
```

### 2. `?` 问号匹配

```sh
# 匹配单个字符的txt文件
ls ?.txt

# 匹配两个字符的txt文件
ls ??.txt

# 匹配三个字符的txt文件
ls ???.txt
```



### 3. `[ ]` 中括号匹配

```sh
ls test[abc].txt        # 匹配test后接a/b/c的txt文件
ls [[:lower:]].log      # 匹配单个小写字母的log文件
ls test[1-3].log        # 匹配test1、test2、test3的log文件
```

### 4. `[! ]` 排除匹配

```sh
ls [!abcd]*.log        # 排除以a/b/c/d开头的log文件
ls *[test]*            # 找出文件名包含test字符的文件
ls *[!test]*.sh        # 排除文件名包含test的sh文件
```

### 5. `find` 命令结合通配符

```sh
find /etc -name '*hosts*'    # 搜索包含hosts的文件
find /etc -name 'ifcfg*'     # 查找网卡配置文件
find /etc -name 'ifcfg*[0-9]'  # 查找数字结尾的网卡配置文件
ls /dev/sd[abcd]             # 查找磁盘分区
ls /dev/sdb[0-9]             # 查找磁盘分区
```

---

## 四、特殊符号详解

### 1. 路径相关符号

| 符号 | 作用 |
| :--- | :--- |
| `~` | 当前用户家目录 |
| `-` | 上一次工作目录 |
| `.` | 当前目录；隐藏文件前缀 |
| `..` | 上一级目录 |

### 2. 引号相关符号

#### 单引号 `''`

```sh
echo 'hello!!*($(pwd)'
```

#### 双引号 `""`

```sh
name="吴彦祖"
echo "别人都喊我${name}"
echo "现在时间是 $(date '+%F %T')"
```

#### 反引号 `` ` `` 和 `$()`

```sh
echo "当前时间是：`date '+%F %T'`"
echo "当前时间是：$(date '+%F %T')"
```

### 3. 重定向符号

| 符号 | 作用 |
| :--- | :--- |
| `>` | 标准输出覆盖重定向 |
| `>>` | 标准输出追加重定向 |
| `<` | 标准输入重定向 |
| `2>` | 标准错误覆盖重定向 |
| `2>&1` | 将标准错误重定向到标准输出 |

```sh
ls /opt/ttttttttt > /tmp/opt.file 2>&1
```

### 4. 命令执行控制符号

| 符号 | 作用 |
| :--- | :--- |
| `&&` | 前命令成功则执行后命令 |
| `||` | 前命令失败则执行后命令 |
| `;` | 顺序执行多个命令 |
| `\` | 转义特殊字符 |
| `|` | 管道符，传递数据 |
| `{}` | 生成序列；变量分隔 |

```sh
make && make install          # 命令组合
ls /optt || cd /opt           # 逻辑或
cd /opt ; pwd ; cd ~          # 顺序执行
touch {a..g}.log              # 序列生成
cp /etc/resolv.conf{,.ori}    # 快速备份
```

---

## 五、练习作业题

### 1. 找出/var下以字母s开头、任意小写字母结尾，中间至少出现一位数字的文件

```sh
find /var -type f -name 's*[0-9]*[a-z]'
```

### 2. 找出/etc/下以任意数字开头，且非数字结尾的文件

```sh
find /etc -type f -name '[0-9]*[!0-9]'
```

### 3. 找出/etc/下任意非字母开头的文件

```sh
find /etc -type f -name '[!a-zA-Z]*'
```

### 4. 找出/etc/下任意非字母开头的文件，且后面紧跟一个数字

```sh
find /etc -type f -name '[!a-zA-Z][0-9]*'
```

### 5. 找出/etc/下所有以rc字母开头，且后面是0-6之间的数字的文件或目录

```sh
find /etc -type f -name 'rc[0-6]*'
```

### 6. 找到/etc/下所有以 `.d` 结尾的文件或目录

```sh
find /etc -name '*.d'
```

### 7. 找出/etc下所有以`.conf`结尾的文件

```sh
find /etc -type f -name '*.conf'
```

### 8. 找出/etc下所有以`.conf`结尾的文件，并且要求文件开头是a,b,p字符之一

```sh
find /etc -type f -name '[abp]*.conf'
```

### 9. 显示/root下所有的隐藏文件和目录

```sh
ls -a /root
```

### 10. 显示/root下所有的非隐藏文件和目录

```sh
ls /root
```

### 11. 使用通配符创建文件、目录结构

```sh
mkdir -p /testdir/{70年代歌曲,90年代歌曲}/{女歌手,男歌手}
touch /testdir/70年代歌曲/男歌手/{刘德华,黎明}.mp4 \
      /testdir/90年代歌曲/男歌手/{周杰伦,陈奕迅}.mp4
tree -NF /testdir
```

```
tree -NF /testdir
/testdir
├── 70年代歌曲/
│   ├── 女歌手/
│   └── 男歌手/
│       ├── 刘德华.mp4
│       └── 黎明.mp4
└── 90年代歌曲/
    ├── 女歌手/
    └── 男歌手/
        ├── 周杰伦.mp4
        └── 陈奕迅.mp4
```

12.备份网卡配置文件为.ori后缀。

```
cp /etc/sysconfig/network-scripts/ifcfg-ens33 /etc/sysconfig/network-scripts/ifcfg-ens33.ori
```

13.备份/var/log/nginx日志文件，以当前年月日命名，如`access_2022-04-11.log`

- 日志基本是一天一切割
- 要求2个写法

```
cp /var/log/nginx/access.log "/var/log/nginx/access_`date +%Y-%m-%d`.log"
cp /var/log/nginx/access.log "/var/log/nginx/access_$(date +%Y-%m-%d).log"
```



